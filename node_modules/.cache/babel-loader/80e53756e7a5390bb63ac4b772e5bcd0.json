{"ast":null,"code":"var _jsxFileName = \"/Users/jacqueline.floyd/Desktop/Course Work/Strangers Things 2/strangers-things/src/components/HeadersComponents/RenderPosts.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Route, Link } from 'react-router-dom';\nimport { AddNewPost } from './AddNewPost';\nimport { fetchPosts } from '../../api/APIcalls';\nimport { MessageForm } from './SendMessageForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst RenderPosts = _ref => {\n  _s();\n\n  let {\n    token,\n    APIURL,\n    username\n  } = _ref;\n  const [posts, setPosts] = useState([]);\n  const [searchString, setSearchString] = useState(\"\");\n  const [message, setMessage] = useState('');\n\n  function postMatches(post, searchString) {\n    let location = post.location.toLowerCase();\n    let description = post.description.toLowerCase();\n    let title = post.title.toLowerCase();\n    let lowercaseString = searchString.toLowerCase();\n\n    if (title.includes(lowercaseString) || description.includes(lowercaseString) || location.includes(lowercaseString)) {\n      return true;\n    }\n  }\n\n  const filteredPosts = posts.filter(post => postMatches(post, searchString));\n  const postsToDisplay = searchString.length ? filteredPosts : posts;\n\n  async function fetchAllPosts() {\n    try {\n      await fetchPosts().then(results => {\n        setPosts(results);\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  } //still causing constant rendering?\n\n\n  useEffect(() => {\n    fetchAllPosts();\n  }, [postsToDisplay]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"searchForm\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          id: \"searchLabel\",\n          children: \"Search Posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"searchInput\",\n          type: \"text\",\n          placeholder: \"enter searchwords...\",\n          autoComplete: \"off\",\n          value: searchString,\n          onChange: async e => {\n            setSearchString(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this), token ? /*#__PURE__*/_jsxDEV(BrowserRouter, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"buttondiv\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button\",\n            id: \"addButton\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              className: \"myPostsLinks\",\n              to: \"/newpost\",\n              children: \"Create New Post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/newpost\",\n            children: /*#__PURE__*/_jsxDEV(AddNewPost, {\n              token: token\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this) : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"posts\",\n      children: postsToDisplay.map((post, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"boxTitle\",\n            children: [\" \", post.title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Username:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 32\n            }, this), \" \", post.author.username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Location:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 32\n            }, this), \" \", post.location]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: post.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \" Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 32\n            }, this), \": \", post.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Will Deliver: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 32\n            }, this), \" \", post.willDeliver ? /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"No\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 74\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Yes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 90\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 29\n          }, this), token && post.author.username !== username ? /*#__PURE__*/_jsxDEV(BrowserRouter, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button\",\n              id: \"messageButton\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                className: \"myPostsLinks\",\n                to: \"/message\",\n                children: \"Respond to Author\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 32\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/message\",\n                children: /*#__PURE__*/_jsxDEV(MessageForm, {\n                  APIURL: APIURL,\n                  post_id: post._id,\n                  token: token,\n                  message: message,\n                  setMessage: setMessage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 39\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }, this) : '']\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 24\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(RenderPosts, \"hwqjO01qptXcfVgxkTLBhrK2eTk=\");\n\n_c = RenderPosts;\nexport { RenderPosts };\n\nvar _c;\n\n$RefreshReg$(_c, \"RenderPosts\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Route","Link","AddNewPost","fetchPosts","MessageForm","RenderPosts","token","APIURL","username","posts","setPosts","searchString","setSearchString","message","setMessage","postMatches","post","location","toLowerCase","description","title","lowercaseString","includes","filteredPosts","filter","postsToDisplay","length","fetchAllPosts","then","results","error","console","e","target","value","map","index","author","price","willDeliver","_id"],"sources":["/Users/jacqueline.floyd/Desktop/Course Work/Strangers Things 2/strangers-things/src/components/HeadersComponents/RenderPosts.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { BrowserRouter, Route, Link } from 'react-router-dom';\nimport { AddNewPost } from './AddNewPost';\nimport { fetchPosts } from '../../api/APIcalls';\nimport { MessageForm } from './SendMessageForm';\n\nconst RenderPosts = ({token, APIURL, username}) => { \n \n\n \n  const [posts, setPosts] = useState ([]);\n  const [searchString, setSearchString] = useState (\"\");\n  const [message, setMessage] = useState('')\n\n  function postMatches(post, searchString) {\n\n      let location=post.location.toLowerCase();\n      let description=post.description.toLowerCase();\n      let title=post.title.toLowerCase();\n      let lowercaseString=searchString.toLowerCase();\n\n      if (title.includes(lowercaseString) || description.includes(lowercaseString) || location.includes(lowercaseString)) {\n        return true\n      }\n    }\n  \n  const filteredPosts = posts.filter(post => postMatches(post, searchString));\n  const postsToDisplay = searchString.length ? filteredPosts : posts;\n  \n  async function fetchAllPosts() {\n    try {\n      await fetchPosts().then((results) => {setPosts(results)});\n      \n    } catch (error) {\n      console.error(error);\n    }}\n\n    //still causing constant rendering?\n  useEffect(()=>{\n    fetchAllPosts ();\n  }, [postsToDisplay]);\n\nreturn <>\n        <div>\n          <form id='searchForm'>\n            <label id='searchLabel'>Search Posts</label>\n            <input id='searchInput' type=\"text\" placeholder=\"enter searchwords...\" autoComplete=\"off\" value={searchString} \n              onChange={async (e) => {\n                  setSearchString(e.target.value);\n            }}>\n            </input>\n            <button>Search</button>\n          </form>\n\n          {token ?\n          <BrowserRouter>\n          <div id='buttondiv'>\n            <button className='button' id='addButton' >\n              <Link className='myPostsLinks' to=\"/newpost\">Create New Post</Link>\n            </button>\n          </div>\n\n            <div>\n              <Route path=\"/newpost\">\n                <AddNewPost token={token}/>\n              </Route>\n            </div>\n          </BrowserRouter>  : ''}\n        </div>\n\n        <div id=\"posts\">{postsToDisplay.map((post, index)=> {\n\n                return <div className=\"post\" key={index}> \n                            <h2 className='boxTitle'> {post.title}</h2>\n                            <p><b>Username:</b> {post.author.username}</p>\n                            <p><b>Location:</b> {post.location}</p>\n                            <p>{post.description}</p>\n                            <p><b> Price</b>: {post.price}</p>\n                            <p><b>Will Deliver: </b> {post.willDeliver ? <span>No</span>:<span>Yes</span>}</p>\n                            {(token && (post.author.username !== username)) ? \n                            <BrowserRouter>\n                               <button className='button' id='messageButton' >\n                                    <Link className='myPostsLinks' to='/message'>Respond to Author</Link>\n                                </button>\n                                <div>\n                                    <Route path='/message'>\n                                      <MessageForm APIURL={APIURL} post_id={post._id} token={token} message={message} setMessage={setMessage}/>\n                                    </Route> \n                                </div>\n                            </BrowserRouter> : '' }\n                      </div>\n        })}\n        </div>\n      </>\n}\n\nexport {RenderPosts}"],"mappings":"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"},"metadata":{},"sourceType":"module"}