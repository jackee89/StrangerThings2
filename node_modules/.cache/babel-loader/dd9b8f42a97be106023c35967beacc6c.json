{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jacqueline.floyd/Desktop/Course Work/Strangers Things 2/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jacqueline.floyd/Desktop/Course Work/Strangers Things 2/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jacqueline.floyd/Desktop/Course Work/Strangers Things 2/strangers-things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{deletePost}from\"../../api/APIcalls\";import{BrowserRouter,Route,Link}from\"react-router-dom\";import{EditPost}from\"./EditPost\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var RenderMyPosts=function RenderMyPosts(_ref){var token=_ref.token,APIURL=_ref.APIURL;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),myPosts=_useState2[0],setMyPosts=_useState2[1];//try to get this into API call area later\nfunction fetchMyPosts(){return _fetchMyPosts.apply(this,arguments);}function _fetchMyPosts(){_fetchMyPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(APIURL,\"/posts\"),{method:\"GET\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(function(response){return response.json();}).then(function(result){var myPostsArray=[];var posts=result.data.posts;posts.map(function(post){if(post.isAuthor===true){myPostsArray.push(post);}});console.log(\"This is an array of my posts: \".concat(myPostsArray));setMyPosts(myPostsArray);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchMyPosts.apply(this,arguments);}useEffect(function(){fetchMyPosts();},[myPosts]);return/*#__PURE__*/_jsx(\"div\",{id:\"posts\",children:myPosts.map(function(post,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"boxTitle\",children:[\" \",post.title]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Username:\"}),\" \",post.author.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Location:\"}),\" \",post.location]}),/*#__PURE__*/_jsx(\"p\",{children:post.description}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Price:\"}),\" \",post.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Will Deliver:\"}),\" \",post.willDeliver?/*#__PURE__*/_jsx(\"span\",{children:\"No\"}):/*#__PURE__*/_jsx(\"span\",{children:\"Yes\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:deletePost(token,post._id);case 1:case\"end\":return _context.stop();}}},_callee);})),children:\"Delete\"}),/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:/*#__PURE__*/_jsx(Link,{className:\"myPostsLinks\",to:\"/editpost\",children:\"Edit\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Route,{path:\"/editpost\",children:/*#__PURE__*/_jsx(EditPost,{token:token,postID:post._id})})})]})]},index);})});};export{RenderMyPosts};","map":{"version":3,"names":["React","useState","useEffect","deletePost","BrowserRouter","Route","Link","EditPost","RenderMyPosts","token","APIURL","myPosts","setMyPosts","fetchMyPosts","fetch","method","headers","then","response","json","result","myPostsArray","posts","data","map","post","isAuthor","push","console","log","index","title","author","username","location","description","price","willDeliver","_id"],"sources":["/Users/jacqueline.floyd/Desktop/Course Work/Strangers Things 2/strangers-things/src/components/HeadersComponents/RenderMyPosts.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport {  deletePost } from \"../../api/APIcalls\";\nimport { BrowserRouter, Route, Link } from \"react-router-dom\";\nimport {EditPost} from \"./EditPost\"\n\nconst RenderMyPosts = ({token, APIURL}) => {\n\n    const [myPosts, setMyPosts] = useState([]);\n\n    \n    //try to get this into API call area later\n   async function fetchMyPosts() {\n      await fetch(`${APIURL}/posts`, {\n          method: \"GET\",\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n        }).then(response => response.json())\n          .then(result => {\n            let myPostsArray=[];\n           let posts= result.data.posts;\n            posts.map((post) => {if (post.isAuthor === true) {myPostsArray.push(post)}})\n           console.log(`This is an array of my posts: ${myPostsArray}`);\n            setMyPosts(myPostsArray);\n          })}\n          useEffect(()=>{\n            fetchMyPosts();\n          }, [myPosts]);\n    \n  \n    return <div id=\"posts\">{myPosts.map((post, index)=>{\n                  \n        return(<div key={index} className=\"post\">\n                    <h2 className='boxTitle'> {post.title}</h2>\n                    <p><b>Username:</b> {post.author.username}</p>\n                    <p><b>Location:</b> {post.location}</p>\n                    <p>{post.description}</p>\n                    <p><b>Price:</b> {post.price}</p>\n                    <p><b>Will Deliver:</b> {post.willDeliver ? <span>No</span>:<span>Yes</span>}</p>\n                    <button className='button' onClick={async()=>{deletePost(token, post._id)}} >Delete</button> \n                    \n                        <BrowserRouter>\n                            <button className='button'>\n                              <Link className='myPostsLinks' to=\"/editpost\">Edit</Link>\n                            </button>\n\n                            <div>\n                              <Route path=\"/editpost\">\n                                <EditPost token={token} postID={post._id} />\n                              </Route>\n                            </div>\n                        </BrowserRouter>\n                    \n                </div>\n    )})}\n    </div>\n}\n\nexport {RenderMyPosts}\n\n"],"mappings":"+fAAA,MAAOA,MAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAAUC,UAAV,KAA4B,oBAA5B,CACA,OAASC,aAAT,CAAwBC,KAAxB,CAA+BC,IAA/B,KAA2C,kBAA3C,CACA,OAAQC,QAAR,KAAuB,YAAvB,C,wFAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,MAAqB,IAAnBC,MAAmB,MAAnBA,KAAmB,CAAZC,MAAY,MAAZA,MAAY,CAEvC,cAA8BT,QAAQ,CAAC,EAAD,CAAtC,wCAAOU,OAAP,eAAgBC,UAAhB,eAGA;AALuC,QAMzBC,aANyB,gJAMxC,iKACSC,MAAK,WAAIJ,MAAJ,WAAoB,CAC3BK,MAAM,CAAE,KADmB,CAE3BC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,iCAA2BP,KAA3B,CAFO,CAFkB,CAApB,CAAL,CAMDQ,IANC,CAMI,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAT,EAAJ,EANZ,EAODF,IAPC,CAOI,SAAAG,MAAM,CAAI,CACd,GAAIC,aAAY,CAAC,EAAjB,CACD,GAAIC,MAAK,CAAEF,MAAM,CAACG,IAAP,CAAYD,KAAvB,CACCA,KAAK,CAACE,GAAN,CAAU,SAACC,IAAD,CAAU,CAAC,GAAIA,IAAI,CAACC,QAAL,GAAkB,IAAtB,CAA4B,CAACL,YAAY,CAACM,IAAb,CAAkBF,IAAlB,EAAwB,CAAC,CAA3E,EACDG,OAAO,CAACC,GAAR,yCAA6CR,YAA7C,GACCT,UAAU,CAACS,YAAD,CAAV,CACD,CAbC,CADT,yDANwC,+CAqBjCnB,SAAS,CAAC,UAAI,CACZW,YAAY,GACb,CAFQ,CAEN,CAACF,OAAD,CAFM,CAAT,CAKN,mBAAO,YAAK,EAAE,CAAC,OAAR,UAAiBA,OAAO,CAACa,GAAR,CAAY,SAACC,IAAD,CAAOK,KAAP,CAAe,CAE/C,mBAAO,aAAiB,SAAS,CAAC,MAA3B,wBACK,YAAI,SAAS,CAAC,UAAd,eAA2BL,IAAI,CAACM,KAAhC,GADL,cAEK,kCAAG,gCAAH,KAAqBN,IAAI,CAACO,MAAL,CAAYC,QAAjC,GAFL,cAGK,kCAAG,gCAAH,KAAqBR,IAAI,CAACS,QAA1B,GAHL,cAIK,mBAAIT,IAAI,CAACU,WAAT,EAJL,cAKK,kCAAG,6BAAH,KAAkBV,IAAI,CAACW,KAAvB,GALL,cAMK,kCAAG,oCAAH,KAAyBX,IAAI,CAACY,WAAL,cAAmB,4BAAnB,cAAmC,6BAA5D,GANL,cAOK,eAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,wEAAE,qIAAUlC,UAAU,CAACM,KAAD,CAAQgB,IAAI,CAACa,GAAb,CAAV,CAAV,sDAAF,EAAlC,oBAPL,cASS,MAAC,aAAD,yBACI,eAAQ,SAAS,CAAC,QAAlB,uBACE,KAAC,IAAD,EAAM,SAAS,CAAC,cAAhB,CAA+B,EAAE,CAAC,WAAlC,kBADF,EADJ,cAKI,kCACE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,uBACE,KAAC,QAAD,EAAU,KAAK,CAAE7B,KAAjB,CAAwB,MAAM,CAAEgB,IAAI,CAACa,GAArC,EADF,EADF,EALJ,GATT,GAAUR,KAAV,CAAP,CAsBF,CAxBsB,CAAjB,EAAP,CA0BH,CApDD,CAsDA,OAAQtB,aAAR"},"metadata":{},"sourceType":"module"}