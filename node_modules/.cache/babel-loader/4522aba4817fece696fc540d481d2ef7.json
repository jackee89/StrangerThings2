{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jacqueline.floyd/Desktop/Course Work/Strangers Things 2/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jacqueline.floyd/Desktop/Course Work/Strangers Things 2/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jacqueline.floyd/Desktop/Course Work/Strangers Things 2/strangers-things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RenderMessages=function RenderMessages(_ref){var token=_ref.token,username=_ref.username,APIURL=_ref.APIURL;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var myInboxMessages=[];var mySentMessages=[];var fetchMyMessages=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(token){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(APIURL,\"/users/me\"),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(function(response){return response.json();}).then(function(result){//console.log(result)\nconsole.log(\"These are my messages: \".concat(result.data.messages));setMessages(result.data.messages);}).catch(console.error);case 2:case\"end\":return _context.stop();}}},_callee);}));return function fetchMyMessages(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchMyMessages(token);},[]);messages.map(function(message){if(message.fromUser.username===username){mySentMessages.push(message);}else{myInboxMessages.push(message);}});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"inboxHeader\",children:\"Inbox\"}),/*#__PURE__*/_jsx(\"div\",{children:myInboxMessages.map(function(message,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"message\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"boxTitle\",children:message.fromUser.username}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Post: \"}),message.post.title]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Message: \"}),message.content]}),/*#__PURE__*/_jsx(Link,{to:\"/message\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"Reply\"})})]},index);})}),/*#__PURE__*/_jsx(\"h3\",{className:\"inboxHeader\",children:\"Sent\"}),/*#__PURE__*/_jsx(\"div\",{children:mySentMessages.map(function(message,index){return/*#__PURE__*/_jsxs(\"div\",{id:\"sentMessage\",className:\"message\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"boxTitle\",children:[\"Post: \",message.post.title]}),/*#__PURE__*/_jsx(\"p\",{children:message.content})]},index);})})]});};export{RenderMessages};","map":{"version":3,"names":["React","useEffect","useState","Link","RenderMessages","token","username","APIURL","messages","setMessages","myInboxMessages","mySentMessages","fetchMyMessages","fetch","headers","then","response","json","result","console","log","data","catch","error","map","message","fromUser","push","index","post","title","content"],"sources":["/Users/jacqueline.floyd/Desktop/Course Work/Strangers Things 2/strangers-things/src/components/HeadersComponents/RenderMessages.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst RenderMessages = ({token, username, APIURL}) => {\n\n  const [messages, setMessages] =useState([])\n\n\n\n  let myInboxMessages= [];\n  let mySentMessages= [];\n\n  const fetchMyMessages = async (token) => {\n      await fetch(`${APIURL}/users/me`, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}` \n        },\n      }).then(response => response.json())\n        .then(result => {\n            //console.log(result)\n            console.log(`These are my messages: ${result.data.messages}`);\n            setMessages(result.data.messages)  \n        })\n        .catch(console.error);\n      };\n\n\n  useEffect(()=>{\n    fetchMyMessages(token);\n  }, []);\n\n\n\n  messages.map((message)=>{\n    if( message.fromUser.username === username) {\n      mySentMessages.push(message);\n    } else {\n      myInboxMessages.push(message);\n    }\n  })\n\n\n    return <>\n          <h3 className='inboxHeader'>Inbox</h3>\n          <div>{myInboxMessages.map((message, index)=>{\n            return <div className='message'key={index}>\n                      <p className='boxTitle'>{message.fromUser.username}</p>\n                      <p><b>Post: </b>{message.post.title}</p>\n                      <p><b>Message: </b>{message.content}</p>\n                      <Link to='/message'><button className='button'>Reply</button></Link>\n                  </div>\n          })}\n          </div>\n\n          <h3 className='inboxHeader'>Sent</h3>\n          <div>{ mySentMessages.map((message, index)=>{\n                return <div id=\"sentMessage\" className='message' key={index}>\n                          {/* <p>find a way to get username to display</p>  */}\n                          <p className='boxTitle'>Post: {message.post.title}</p>\n                          <p>{message.content}</p>\n                          {/* <Link to='/message'><button className='button'>Send Another?</button></Link>  */}\n                        </div>\n          })}\n          </div>\n      </>\n}\n\n export {RenderMessages}\n\n\n\n\n\n"],"mappings":"+fAAA,MAAOA,MAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAASC,IAAT,KAAqB,kBAArB,C,6IAEA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,MAA+B,IAA7BC,MAA6B,MAA7BA,KAA6B,CAAtBC,QAAsB,MAAtBA,QAAsB,CAAZC,MAAY,MAAZA,MAAY,CAEpD,cAA+BL,QAAQ,CAAC,EAAD,CAAvC,wCAAOM,QAAP,eAAiBC,WAAjB,eAIA,GAAIC,gBAAe,CAAE,EAArB,CACA,GAAIC,eAAc,CAAE,EAApB,CAEA,GAAMC,gBAAe,6FAAG,iBAAOP,KAAP,0IACdQ,MAAK,WAAIN,MAAJ,cAAuB,CAChCO,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,iCAA2BT,KAA3B,CAFO,CADuB,CAAvB,CAAL,CAKHU,IALG,CAKE,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAT,EAAJ,EALV,EAMHF,IANG,CAME,SAAAG,MAAM,CAAI,CACZ;AACAC,OAAO,CAACC,GAAR,kCAAsCF,MAAM,CAACG,IAAP,CAAYb,QAAlD,GACAC,WAAW,CAACS,MAAM,CAACG,IAAP,CAAYb,QAAb,CAAX,CACH,CAVG,EAWHc,KAXG,CAWGH,OAAO,CAACI,KAXX,CADc,uDAAH,kBAAfX,gBAAe,6CAArB,CAgBAX,SAAS,CAAC,UAAI,CACZW,eAAe,CAACP,KAAD,CAAf,CACD,CAFQ,CAEN,EAFM,CAAT,CAMAG,QAAQ,CAACgB,GAAT,CAAa,SAACC,OAAD,CAAW,CACtB,GAAIA,OAAO,CAACC,QAAR,CAAiBpB,QAAjB,GAA8BA,QAAlC,CAA4C,CAC1CK,cAAc,CAACgB,IAAf,CAAoBF,OAApB,EACD,CAFD,IAEO,CACLf,eAAe,CAACiB,IAAhB,CAAqBF,OAArB,EACD,CACF,CAND,EASE,mBAAO,wCACD,WAAI,SAAS,CAAC,aAAd,mBADC,cAED,qBAAMf,eAAe,CAACc,GAAhB,CAAoB,SAACC,OAAD,CAAUG,KAAV,CAAkB,CAC1C,mBAAO,aAAK,SAAS,CAAC,SAAf,wBACG,UAAG,SAAS,CAAC,UAAb,UAAyBH,OAAO,CAACC,QAAR,CAAiBpB,QAA1C,EADH,cAEG,kCAAG,6BAAH,CAAiBmB,OAAO,CAACI,IAAR,CAAaC,KAA9B,GAFH,cAGG,kCAAG,gCAAH,CAAoBL,OAAO,CAACM,OAA5B,GAHH,cAIG,KAAC,IAAD,EAAM,EAAE,CAAC,UAAT,uBAAoB,eAAQ,SAAS,CAAC,QAAlB,mBAApB,EAJH,GAA6BH,KAA7B,CAAP,CAMD,CAPK,CAAN,EAFC,cAYD,WAAI,SAAS,CAAC,aAAd,kBAZC,cAaD,qBAAOjB,cAAc,CAACa,GAAf,CAAmB,SAACC,OAAD,CAAUG,KAAV,CAAkB,CACtC,mBAAO,aAAK,EAAE,CAAC,aAAR,CAAsB,SAAS,CAAC,SAAhC,wBAEG,WAAG,SAAS,CAAC,UAAb,oBAA+BH,OAAO,CAACI,IAAR,CAAaC,KAA5C,GAFH,cAGG,mBAAIL,OAAO,CAACM,OAAZ,EAHH,GAA+CH,KAA/C,CAAP,CAML,CAPM,CAAP,EAbC,GAAP,CAuBH,CA/DD,CAiEC,OAAQxB,cAAR"},"metadata":{},"sourceType":"module"}